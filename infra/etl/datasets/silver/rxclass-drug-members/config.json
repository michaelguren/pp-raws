{
  "dataset": "rxclass-drug-members",
  "layer": "silver",
  "description": "RxClass drug classifications for all prescribable products from NLM RxNav byRxcui API (drug-first approach)",
  "data_size_category": "large",
  "source_dependencies": {
    "silver": ["rxnorm_products"]
  },
  "schedule": {
    "enabled": true,
    "expression": "cron(0 5 5 * ? *)",
    "description": "Monthly on the 5th at 5 AM (after RxNORM Products silver layer completes)"
  },
  "output_table": "rxclass_drug_members",
  "data_quality": {
    "critical_null_threshold": 0.01,
    "required_columns": ["class_id", "rxcui", "name"],
    "expected_record_count_min": 500000
  },
  "api_base_url": "https://rxnav.nlm.nih.gov/REST/rxclass/class/byRxcui.json",
  "processing_notes": {
    "method": "Distributed processing using Spark mapPartitions - each worker processes partition of drugs in parallel",
    "rate_limiting": "0.6s delay per API call to comply with NLM 20 req/sec per IP limit (10 workers share same NAT Gateway IP)",
    "api_compliance": "10 workers Ã— 1.67 req/sec = 16.7 req/sec total (safe buffer under 20 req/sec limit)",
    "data_format": "JSON API responses - each drug returns ALL class relationships in single call",
    "parallelization": "10 workers (large), ~2,100 drugs per worker for 21k total products",
    "estimated_runtime": "21 minutes wall time (vs 25 min class-first incomplete approach)",
    "data_completeness": "500K-1M relationships (vs 21K with class-first approach)",
    "attribution": "This product uses publicly available data from the U.S. National Library of Medicine (NLM), National Institutes of Health, Department of Health and Human Services; NLM is not responsible for the product and does not endorse or recommend this or any other product."
  }
}
